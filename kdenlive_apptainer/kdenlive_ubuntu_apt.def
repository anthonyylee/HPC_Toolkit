# Kdenlive apptainer
# Anthony Lee 2025-12-13

Bootstrap: docker
From: ubuntu:22.04

%environment
    # Set necessary environment variables for Kdenlive to run correctly
    export LC_ALL=C
    #export XDG_RUNTIME_DIR="/tmp/$UID"
    export QT_QPA_PLATFORM=xcb

%post
    # Source: https://github.com/apptainer/apptainer/issues/2231
    export DEBIAN_FRONTEND=noninteractive

    # Update packages and install Kdenlive with apt
    apt-get update
    apt-get install -y kdenlive ffmpeg dvgrab dvdauthor genisoimage vlc

    # Clean up apt caches to keep image size small
    apt-get clean
    rm -rf /var/lib/apt/lists/*

%runscript
    # Command to run when the container starts
    kdenlive "$@"
